<html>
<head>
	<title>EcoSport</title>
	<meta charset="utf-8" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
</head>
<body>
	<div class="content-wrapper">
		<div id="map" style="width: 80%; height: 100%"></div>
	</div>



	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
	<script src="d3.v3.js"></script>
	<script src="jquery.min.js"></script>
	 <link href="AdminLTE-2.3.3/dist/css/AdminLTE.min.css" rel="stylesheet">
    <link href="AdminLTE-2.3.3/dist/css/skins/_all-skins.min.css" rel="stylesheet">
    <script src="AdminLTE-2.3.3/dist/js/app.min.js"></script>
    <link href="AdminLTE-2.3.3/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <script src="AdminLTE-2.3.3/bootstrap/js/bootstrap.min.js"></script>
	<script>

		var map = L.map('map', {center: [55.684485,37.906519], zoom: 14});
		L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
			maxZoom: 18,
			attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
				'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
			id: 'mapbox.streets'
		}).addTo(map);


	map._initPathRoot()    

	/* We simply pick up the SVG from the map object */
	var svg = d3.select("#map").select("svg"),
	g = svg.append("g");

	// d3.json("running.json", function(collection) {

	// 	collection.features.forEach(function(d) {
	// 		d.LatLng = new L.LatLng(d.geometry.coordinates[1],
	// 								d.geometry.coordinates[0])
	// 		});
	// 	collection.features.forEach(function(d) {
	// 		var poll = {};
	// 		var data,
	// 	    url = 'https://api.aerostate.org/' + d.geometry.coordinates[1] + ',' + d.geometry.coordinates[0] + '/no2,no,o3,co,aqi,pm2_5_dry,pm10',
	// 	    headers =   {"Authorization": "basic 53538834-9084-85a6-4449-56d1bdb85056"};
	// 	$.ajaxSetup({"headers": headers});
	// 	$.ajax({
	// 		url:url, 
	// 		async: false, 
	// 		dataType: 'json',
	// 		success: function(json) {
	// 	    d.poll = json
	// 	    console.log(json);
	// 	}});
	// 	console.log(poll);
	// });
	// 	var sc = d3.scale.threshold()
	// 	.domain([51, 101, 151, 201, 301, 500])
	// 	.range(['green', 'yellow', ' #ff7f00', 'red', '#8a2be2', '#d02090'])

	// 	var feature = g.selectAll("circle")
	// 		.data(collection.features)
	// 		.enter().append("circle")
	// 		.style("stroke", "black")  
	// 		.style("opacity", .6) 
	// 		.style("fill", function(d){return sc(d.poll[1][4])})
	// 		.attr("r", 15);  
		


	// 	map.on("viewreset", update);
	// 	update();

	// 	function update() {
	// 		feature.attr("transform", 
	// 		function(d) { 
	// 			return "translate("+ 
	// 				map.latLngToLayerPoint(d.LatLng).x +","+ 
	// 				map.latLngToLayerPoint(d.LatLng).y +")";
	// 			}
	// 		)
	// 	}
	// 	 console.log(collection)
	// });

/*
		L.marker([51.5, -0.09]).addTo(mymap)
			.bindPopup("<b>Hello world!</b><br />I am a popup.").openPopup();

		L.circle([51.508, -0.11], 500, {
			color: 'red',
			fillColor: '#f03',
			fillOpacity: 0.5
		}).addTo(mymap).bindPopup("I am a circle.");

		L.polygon([
			[51.509, -0.08],
			[51.503, -0.06],
			[51.51, -0.047]
		]).addTo(mymap).bindPopup("I am a polygon.");


		var popup = L.popup();

		function onMapClick(e) {
			popup
				.setLatLng(e.latlng)
				.setContent("You clicked the map at " + e.latlng.toString())
				.openOn(mymap);
		}

		mymap.on('click', onMapClick);
		*/

	</script>
</body>
</html>
